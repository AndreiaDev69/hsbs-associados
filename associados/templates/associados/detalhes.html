
{% extends 'associados/base.html' %}
{% block title %}Detalhes do Associado{% endblock %}
{% block content %}
<h1>{{ associado.nome }}</h1>
<p><strong>Status:</strong> {{ associado.get_status_display }}</p>
<p><strong>Documento:</strong> {{ associado.documento }}</p>
<p><strong>Email:</strong> {{ associado.email }}</p>
<p><strong>Telefone:</strong> {{ associado.telefone }}</p>
<p><strong>Endereço:</strong> {{ associado.endereco }}</p>

<hr>

<div class="mb-3">
  <a href="{% url 'financeiro_associado' associado.pk %}" class="btn btn-outline-primary btn-sm">Financeiro</a>
  <a href="{% url 'associados_list' %}" class="btn btn-secondary btn-sm">Voltar</a>
</div>

<h3 class="mt-4">Lançamentos Financeiros Recentes</h3>
<table class="table table-sm">
  <thead>
    <tr>
      <th>Data</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Valor</th>
    </tr>
  </thead>
  <tbody>
    {% for l in lancamentos %}
      <tr>
        <td>{{ l.data }}</td>
        <td>{{ l.get_tipo_display }}</td>
        <td>{{ l.descricao }}</td>
        <td>R$ {{ l.valor }}</td>
      </tr>
    {% empty %}
      <tr><td colspan="4">Nenhum lançamento financeiro.</td></tr>
    {% endfor %}
  </tbody>
</table>

<h3 class="mt-4">Movimentações / Auditoria</h3>
<ul class="list-group">
  {% for m in movimentos %}
    <li class="list-group-item">
      <strong>{{ m.data_hora|date:"d/m/Y H:i" }}</strong> — {{ m.acao }}
      {% if m.usuario %} ({{ m.usuario.username }}){% endif %}<br>
      <small>{{ m.detalhes }}</small>
    </li>
  {% empty %}
    <li class="list-group-item">Sem movimentações registradas.</li>
  {% endfor %}
</ul>
{% endblock %}
